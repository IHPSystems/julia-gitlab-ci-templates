include:
  - /templates.gitlab-ci.yaml
  - /jobs/build.julia-1.0.gitlab-ci.yaml
  - /jobs/build.julia-1.1.gitlab-ci.yaml
  - /jobs/build.julia-1.2.gitlab-ci.yaml
  - /jobs/build.julia-1.3.gitlab-ci.yaml
  - /jobs/build.julia-1.4.gitlab-ci.yaml
  - /jobs/build.julia-1.5.gitlab-ci.yaml
  - /jobs/build.julia-lts.gitlab-ci.yaml
  - /jobs/build.julia-stable.gitlab-ci.yaml
  - /jobs/build.julia-1.gitlab-ci.yaml

  - /jobs/test.julia-1.0.gitlab-ci.yaml
  - /jobs/test.julia-1.1.gitlab-ci.yaml
  - /jobs/test.julia-1.2.gitlab-ci.yaml
  - /jobs/test.julia-1.3.gitlab-ci.yaml
  - /jobs/test.julia-1.4.gitlab-ci.yaml
  - /jobs/test.julia-1.5.gitlab-ci.yaml
  - /jobs/test.julia-lts.gitlab-ci.yaml
  - /jobs/test.julia-stable.gitlab-ci.yaml
  - /jobs/test.julia-1.gitlab-ci.yaml

stages:
  - build
  - test

variables:
  JULIA_PROJECT_PATH: examples/Sample

test_variants:
  stage: test
  parallel:
    matrix:
      - JULIA_VERSION: ["1.0", "1.1", "1.2", "1.3", "1.4", "1.5", "1.6", "1.7", "1"]
        JULIA_TEST_WITH_THREADS: ["false", "true"]
        JULIA_TEST_WITH_REPORTS: ["false", "true"]
  except:
    variables:
      - $JULIA_TEST_WITH_THREADS == "true" && $JULIA_TEST_WITH_REPORTS == "true"
  trigger:
    include:
      - /templates.gitlab-ci.yaml
      - /jobs/build.gitlab-ci.yaml
      - /jobs/test.gitlab-ci.yaml
    strategy: depend
  needs: []
